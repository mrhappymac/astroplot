{% extends 'base.html' %}
{% load staticfiles %}

{% block page %}

  <div class="container">
	  <div class="row">
		  <div class="col-md-12 mb-2">
			  <!-- How to add Google and Github OAuth in Django -->
	  			{% if user.is_authenticated %}
	  				<p>Hello, {{ user.username }}</p>
                    <p><a href="{% url 'logout' %}">Logout</a></p>
	  			{% else %}
                    <a href="{% url 'social:begin' 'google-oauth2' %}">Login with Google</a>
	  			{% endif %}
		  </div>
	  </div>
      <div class="row">
        <div class="col-md-12">
          <div class="panel-heading mb-3">
              <a class="navbar-brand" href="/"><img src="{% static 'img/logo.png' %}" height="54"></a>
    		  <br>
          </div>
              <table class="table table-striped table-hover">
                <thead>
                  <tr>
                      <th scope="col">CRYPTOCURRENCY</th>
                      <th scope="col"><div class="d-none d-sm-block">GROWTH SCORE</div></th>
                      <th scope="col">PRICE</th>
                      <th scope="col"><div class="d-none d-sm-block">MARKET CAP</div></th>
                      <th scope="col"><div class="d-none d-sm-block">24H CHANGE</div></th>
                      <th scope="col"><div class="d-none d-sm-block">7D CHANGE</div></th>
    				  {% if user.is_authenticated %}
                      <th scope="col"><div class="d-none d-sm-block">ALERT</div></th>
    				  {% else %}
    				  {% endif %}
                  </tr>
                </thead>
                <tbody>
                    {% for coin in result %}
                        <tr>
                            <td>{{coin.rank}}&ensp;
                                {% with 'img/'|add:coin.symbol|add:'.png' as image_static %}
                                    <img src="{% static image_static %}" alt="{{coin.symbol}}" height="24">&ensp;
                                {% endwith %}
                                <a href="/detail/{{coin.id}}">{{coin.name}}</a>
                            </td>

                            <td><div class="d-none d-sm-block">{{coin.symbol}}</div></td>
                            <td>&#36;{{coin.price_usd}}</td>
                            <td><div class="d-none d-sm-block">&#36;{{coin.market_cap_usd}}</div></td>
                            <td><div class="d-none d-sm-block">{{coin.percent_change_24h}}&#37;</div></td>
                            <td><div class="d-none d-sm-block">{{coin.percent_change_7d}}&#37;</div></td>
    						{% if user.is_authenticated %}
                            <td><div class="d-none d-sm-block">YES/NO</div></td>
    						{% else %}
    						{% endif %}
                        </tr>
                    {% endfor %}
                </tbody>
              </table>
          </div>
        </div>
    </div>
{% endblock %}
